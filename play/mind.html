<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Mind Mapper</title>
    <script src="js/react.development.js"></script>
    <script src="js/react-dom.development.js"></script>
    <script src="js/rdflib.min.js"></script>
    <script src="js/solid-auth-client.bundle.js"></script>


    <!-- Don't use this in production: -->
    <script src="js/babel.min.js"></script>

    <style>
      .outer {
        position: relative;
        margin: 50px;
      }
      #map {
        height: 500px;
        width: 100%;
        overflow: auto;
      }
    </style>    
</head>

<body>
  <div id="root"></div>
  <div class="outer">
    <div id="map"></div>
    <a  onClick="javascript: var data = JSON.stringify(mind.getAllData().nodeData) ; console.log(data) ; let href =  window.location.href.split('?')[0] ; href += '?data=' + encodeURIComponent(JSON.stringify(mind.getAllData()))
 ; history.pushState({}, 'App', href)" class="button is-primary">Export Data</a>
  </div>
  <script type="text/babel" src="../src/components/bulma/Navbar.jsx"></script>

    <script type="text/babel" src="jsx/Mind.jsx"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-elixir/dist/mind-elixir.js"></script>    
    <link rel="stylesheet" href="css/bulma.css" defer>
    <link rel="stylesheet" href="css/common.css" defer>

    <script>
      let d = new URLSearchParams(document.location.search).get('data') 
      console.log('d', d)
      d = d ? JSON.parse(d) : MindElixir.new('Solid Map')
      console.log('d', d)
      let mind = new MindElixir({
        el: '#map',
        direction: MindElixir.RIGHT,
        data: d, // can also set data return from .getAllData()
        draggable: true, // default true
        contextMenu: true, // default true
        toolBar: true, // default true
        nodeMenu: true, // default true
        keypress: true, // default true
      })
      mind.init()

      // get a node
      E('node-id')

    </script>

</body>

</html>