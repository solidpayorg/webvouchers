<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <title>Web Vouchers</title>
  <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
  <script class='remove'>
    var respecConfig = {
      specStatus: "CG-DRAFT",
      editors: [{
        name: "Melvin Carvalho",
        url: "https://melvincarvalho.com/#me",
        mailto: "melvincarvalho@gmail.com"
      }],
      wg: 'W3C Payments Community Group',
      wgURI: 'https://www.w3.org/community/webpayments/',
      wgPublicList: "public-webpayments",
      processVersion: 2019,
      edDraftURI: "https://github.com/solidpayorg/webvouchers/",
      shortName: "webvouchers",
      issueBase: "https://github.com/solidpayorg/webvouchers/"
    };
  </script>

  <style>
    .turtle .hll {
      background-color: #ffffcc
    }
  </style>

</head>

<body>
  <section id='abstract'>
    <i><b>A cabability URN for one time payments</b></i>.
    <p>
      Web Vouchers is a way way to encode a voucher into a URI.
    </p>
  </section>
  <section id='sotd'>
    <p>
      This document in an informal draft discussed in the <a href="https://www.w3.org/community/webpayments/">w3c web
        payments
        community group</a>.
    </p>
  </section>
  <section>
    <h2>Introduction</h2>


    <section>
      <h3>Web Payments Community Group</h3>

      Webvouchers is one of several related specifications being discussed by the <a
        href="https://www.w3.org/community/webpayments/">w3c web payments
        community group</a>.
    </section>


    <section>
      <h3>Overview</h3>
      <h4>Mailing List Thread</h4>

      The web vouchers spec started on the following <a
        href="https://lists.w3.org/Archives/Public/public-webpayments/2019Aug/thread.html">threads</a>.

      This spec is a work in process.

      <h4>URN Format</h4>

      The basic idea is to create a capability URN (like a capability URI but with an URN) and allow it to be used as a
      voucher for spending. The proposed format is :
      <pre>urn:voucher:payload</pre>

      <h4>Design Considerations</h4>

      <p>There needs to be a public component, this is to allow the person owning/selling the voucher to know the
        voucher still contains value. The private part is what is used to redeem and claim the voucher credit. The
        private
        part is typically a one way retrieval process, e.g. tearing open the packet, scratching off the silver or
        hologram.</p>

      <p>Secondly there needs to be checksums... people mistype stuff all the time. I'm finding using a single integer
        number works best for computers to read (e.g. QR code, NFC) and allow this number to be entered as mneomonics
        using Bitcoin's BIP39 so people can enter say 10 words to get that integer number to redeem the voucher.</p>

      <p>Thirdly the issuer needs to be included in the URN. This is because you may have Starbucks, PayPal, CoinMode,
        Google, etc... could be issuing these vouchers. Whoever is issuing the voucher needs to be named somehow.</p>

      <p>Fourthly the currency needs to be described. This is either USD, BTC, GBP, starbuck points etc..</p>

      <p></p>Finally the other key learning is there must be an optional expiry date option as many vouchers are handled
      by
      businesses who need to reclaim lost funds somehow and expirery solves this.</p>


      There are other points to consider but these seem imperative.

      i.e. the fields are

      <pre>
      voucher: to define it is some sort of voucher
      url: where to query and get more info about the voucher.
      public: very large integer value to verify amount voucher can be redeemed for.
      private: the redeeming number
      destination: platform specific could be a cryptoaddress or user handle
    </pre>


      This gives two urns. One to check a voucher and another to redeem it

      <h4>JSON key values</h4>

      The following are suggested JSON fields to tie to a voucher.

      <pre>
        {
          issuer:"acme",
          public: 12345678901234567890,
          is_valid: true,
          currency: "bitcoin",
          amount:1000000
          expires: 1238972934 (epoch time)
          redeem_url : "https://www.acme.com/redeem"
          remaining_uses : 1
          redeemed : false
          redeemed_by : "??"
          redeemed_dates : [ 123987234, 124789238 ]
        }</pre>



    </section>


    <section>
      <h3>Mailing List</h3>

      The web vouchers spec started on the <a
        href="https://lists.w3.org/Archives/Public/public-webpayments/2019Aug/thread.html">W3C Payments Mailing
        List</a>.


    </section>

    <section>
      <h3>Implementations</h3>

      <h4>Client</h4>

      The first client implementation uses vouchers to interact with the lightning network.<br /><br />

      <a href="https://webvouchers.org/play/voucher.html">Client Demo</a>

      <h4>Server</h4>

      <a href="https://github.com/solidpayorg/webvouchers/blob/gh-pages/bin/lightning.js">Server Code</a>

    </section>

    <section>
      <h3>Acknowledgments</h3>

      This spec is a team effort. Thanks to Michiel De Jong, Andrew Bansford Brown, Stuart Rashford and many others for
      making this possible.


    </section>



  </section>




</body>

</html>